---
title: Astro
description: Adding dark mode to your Astro app.
---

## Dark Mode

<Steps>

### Create a theme provider

```astro title="components/ThemeProvider.astro"
<script is:inline>
  document.documentElement.classList.add(
    localStorage.getItem('theme') ?? 'light'
  );
</script>
```

### Put ThemeProvider into your layout

```astro title="src/layouts/BaseLayout.astro"
---
import ThemeProvider from '@/components/ThemeProvider.astro';
---

<html>
  <head>
    <ThemeProvider />
    <!-- Rest of head contents -->
  </head>
```

### Add a mode toggle

Place a mode toggle somewhere in your app.

```tsx title="components/mode-toggle.tsx"
import { MoonIcon, SunIcon } from "@radix-ui/react-icons"

import { Button } from "@/components/ui/button"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"

function setTheme(theme: "dark" | "light" | "system") {
  const currentTheme = localStorage.getItem("theme") ?? "light"
  document.documentElement.classList.remove(currentTheme)
  const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light"
  if (theme === "system") {
    document.documentElement.classList.add(systemTheme)
    localStorage.setItem("theme", systemTheme)
    return
  }
  document.documentElement.classList.add(theme)
  localStorage.setItem("theme", theme)
}

export function ModeToggle() {
  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button variant="outline" size="icon">
          <SunIcon className="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
          <MoonIcon className="absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
          <span className="sr-only">Toggle theme</span>
        </Button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuItem onClick={() => setTheme("light")}>
          Light
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme("dark")}>
          Dark
        </DropdownMenuItem>
        <DropdownMenuItem onClick={() => setTheme("system")}>
          System
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

### Add a mode toggle to your layout

Add the mode toggle to the component or layout you want to use it in.
However, to use it in Astro component, you have to add the [Astro's Client Directives](https://docs.astro.build/en/reference/directives-reference/#client-directives) to ensure that the mode
toggle is only rendered on the client.

```astro title="components/Header.astro"
---
import { ModeToggle } from '@/components/mode-toggle.tsx'
---
<header class="sticky top-0 z-40 px-4 lg:px-0 w-full bg-background/95 backdrop-blur">
  <div class="h-14 container">
    <ModeToggle client:only />
  </div>
</header>
```

</Steps>
